(this["webpackJsonpble-wifi-provisioner"]=this["webpackJsonpble-wifi-provisioner"]||[]).push([[0],{138:function(e,t,n){e.exports=n(268)},143:function(e,t,n){},146:function(e,t,n){},24:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var a,r=n(1),i=n.n(r),s=n(10),c=n(11),o=function(){function e(t,n){Object(s.a)(this,e),this.server=void 0,this.service=null,this.status=void 0,this.ssid=void 0,this.password=void 0,this.security=void 0,this.statusChangeCallback=void 0,this.server=t,this.statusChangeCallback=n}return Object(c.a)(e,[{key:"init",value:function(){var t=this;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.awrap(this.server.getPrimaryService(e.uuid).then((function(e){return t.service=e})));case 3:return n.next=5,i.a.awrap(this.initialiseCharacteristics());case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error(n.t0);case 10:return n.abrupt("return");case 11:case"end":return n.stop()}}),null,this,[[0,7]])}},{key:"initialiseCharacteristics",value:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.service){e.next=3;break}return console.error("No Service found"),e.abrupt("return");case 3:return this.status=new u(this.service,this.statusChangeCallback),this.ssid=new l(this.service),this.password=new h(this.service),this.security=new v(this.service),e.next=9,i.a.awrap(Promise.all([this.status.init(),this.ssid.init(),this.password.init(),this.security.init()]));case 9:case"end":return e.stop()}}),null,this)}}]),e}();o.uuid="2b42180d-0000-1000-9900-00805f9b5ab3",function(e){e[e.IDLE=0]="IDLE",e[e.SAVE=1]="SAVE",e[e.SAVING=2]="SAVING",e[e.SAVED=3]="SAVED",e[e.JOIN=4]="JOIN",e[e.JOINING=5]="JOINING",e[e.JOINED=6]="JOINED",e[e.ERROR=7]="ERROR"}(a||(a={}));var u=function(){function t(e,n){Object(s.a)(this,t),this.service=void 0,this.characteristic=void 0,this.callback=void 0,this.service=e,this.callback=n}return Object(c.a)(t,[{key:"init",value:function(){var e=this;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(this.service.getCharacteristic(t.uuid));case 2:this.characteristic=n.sent,this.characteristic.addEventListener("characteristicvaluechanged",(function(t){var n,a=null===(n=t.target.value)||void 0===n?void 0:n.getUint8(0);e.callback&&e.callback(a)})),this.characteristic.startNotifications();case 5:case"end":return n.stop()}}),null,this)}},{key:"getStatus",value:function(){var e,t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.characteristic){n.next=3;break}return console.error("No Characteristic found"),n.abrupt("return",a.ERROR);case 3:return n.next=5,i.a.awrap(this.characteristic.readValue());case 5:if(1!==(e=n.sent).buffer.byteLength){n.next=11;break}if(t=e.getUint8(0),console.info("Wifi Configuration State",t),!(t<a.ERROR)){n.next=11;break}return n.abrupt("return",t);case 11:return n.abrupt("return",a.ERROR);case 12:case"end":return n.stop()}}),null,this)}},{key:"setStatus",value:function(t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.characteristic){n.next=3;break}return console.error("No Characteristic found"),n.abrupt("return");case 3:if(t===a.SAVE||t===a.JOIN){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,i.a.awrap(this.characteristic.writeValue(e.from([t])));case 7:return n.abrupt("return",n.sent);case 8:case"end":return n.stop()}}),null,this)}}]),t}();u.uuid="0000180d-0000-1000-9901-00805f9b34fb";var l=function(){function t(e){Object(s.a)(this,t),this.service=void 0,this.characteristic=void 0,this.service=e}return Object(c.a)(t,[{key:"init",value:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(this.service.getCharacteristic(t.uuid));case 2:this.characteristic=e.sent;case 3:case"end":return e.stop()}}),null,this)}},{key:"setSsid",value:function(t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.characteristic){n.next=3;break}return console.error("No Characteristic found"),n.abrupt("return");case 3:return n.next=5,i.a.awrap(this.characteristic.writeValue(e.from(t)));case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),null,this)}}]),t}();l.uuid="0000180d-0000-1000-9902-00805f9b34fb";var h=function(){function t(e){Object(s.a)(this,t),this.service=void 0,this.characteristic=void 0,this.service=e}return Object(c.a)(t,[{key:"init",value:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(this.service.getCharacteristic(t.uuid));case 2:this.characteristic=e.sent;case 3:case"end":return e.stop()}}),null,this)}},{key:"setPassword",value:function(t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.characteristic){n.next=3;break}return console.error("No Characteristic found"),n.abrupt("return");case 3:return n.next=5,i.a.awrap(this.characteristic.writeValue(e.from(t)));case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),null,this)}}]),t}();h.uuid="0000180d-0000-1000-9903-00805f9b34fb";var v=function(){function t(e){Object(s.a)(this,t),this.service=void 0,this.characteristic=void 0,this.service=e}return Object(c.a)(t,[{key:"init",value:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(this.service.getCharacteristic(t.uuid));case 2:this.characteristic=e.sent;case 3:case"end":return e.stop()}}),null,this)}},{key:"setSecurity",value:function(t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.characteristic){n.next=3;break}return console.error("No Characteristic found"),n.abrupt("return");case 3:return n.next=5,i.a.awrap(this.characteristic.writeValue(e.from([t])));case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),null,this)}}]),t}();v.uuid="0000180d-0000-1000-9904-00805f9b34fb"}).call(this,n(93).Buffer)},268:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),s=n(35),c=n.n(s),o=(n(143),n(1)),u=n.n(o),l=n(10),h=n(11),v=n(20),d=n(21),f=n(19),p=n(22),b=function(){function e(t){Object(l.a)(this,e),this.device=void 0,this.device=t}return Object(h.a)(e,[{key:"init",value:function(e,t){return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("====="),n.next=3,u.a.awrap(this.device.initialiseGattServer());case 3:return n.next=5,u.a.awrap(this.device.initialiseServices(e,t));case 5:console.log("=====");case 6:case"end":return n.stop()}}),null,this)}},{key:"getScanList",value:function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("getScanList"),e.prev=1,console.log("Device"),this.device){e.next=5;break}throw Error("Could not find device");case 5:if(console.log("scannerService"),this.device.scannerService){e.next=8;break}throw Error("could not find service");case 8:return e.next=10,u.a.awrap(this.device.getScanList());case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:return e.abrupt("return");case 16:case"end":return e.stop()}}),null,this,[[1,12]])}},{key:"readScanList",value:function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=["Tesseract","Poseidon"],t.prev=1,this.device){t.next=4;break}throw Error("Could not find device");case 4:if(this.device.scannerService){t.next=6;break}throw Error("could not find service");case 6:return t.next=8,u.a.awrap(this.device.readScanList());case 8:return e=t.sent,console.log(e),t.abrupt("return",e);case 13:t.prev=13,t.t0=t.catch(1),console.error(t.t0);case 16:return t.abrupt("return",e);case 17:case"end":return t.stop()}}),null,this,[[1,13]])}},{key:"setWifiConfig",value:function(e,t){return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.awrap(this.device.pushCredentials(e,t,2));case 3:return n.next=5,u.a.awrap(this.device.storeCredentials());case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error(n.t0);case 10:case"end":return n.stop()}}),null,this,[[0,7]])}},{key:"joinWifi",value:function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("joinWifi"),e.next=4,u.a.awrap(this.device.joinNetwork());case 4:console.log("Joined"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),null,this,[[0,7]])}}]),e}(),g=(n(145),n(146),n(24)),w=n(36),k=function(){function e(t){Object(l.a)(this,e),this._device=void 0,this._server=void 0,this.configurationService=void 0,this.scannerService=void 0,this._device=t}return Object(h.a)(e,[{key:"initialiseGattServer",value:function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Initialising GATT Server"),t.next=3,u.a.awrap(this._device.gatt);case 3:return this._server=t.sent,this._device.addEventListener("gattserverdisconnected",(function(e){console.warn("DISCONNECTED FROM GATT SERVER",e.target)})),this._device.addEventListener("advertisementreceived",(function(e){console.warn("NEW ADVERT",e.target)})),this._device.watchAdvertisements(),t.next=9,u.a.awrap(null===(e=this._device.gatt)||void 0===e?void 0:e.connect());case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),null,this)}},{key:"initialiseServices",value:function(e,t){return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("Initialising Services"),this._server){n.next=3;break}return n.abrupt("return");case 3:return this.configurationService=new g.b(this._server,e),this.scannerService=new w.b(this._server,t),console.log("Device Services initing..."),n.next=8,u.a.awrap(Promise.all([this.configurationService.init(),this.scannerService.init()]));case 8:return console.log("Device Services init"),n.abrupt("return");case 10:case"end":return n.stop()}}),null,this)}},{key:"getScanList",value:function(){var e,t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("getScanList"),this.scannerService){n.next=3;break}throw Error("Scanner Service Not init");case 3:return console.log("Setting Scann Status"),n.next=6,u.a.awrap(null===(e=this.scannerService)||void 0===e?void 0:null===(t=e.status)||void 0===t?void 0:t.setStatus(w.a.SCAN));case 6:return n.abrupt("return");case 7:case"end":return n.stop()}}),null,this)}},{key:"readScanList",value:function(){var e,t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("readScanList"),!(null===(e=this.scannerService)||void 0===e?void 0:e.list)){n.next=7;break}return n.next=4,u.a.awrap(this.scannerService.list.getList1());case 4:return 200===(t=n.sent).length&&console.warn("List may be getting chopped off"),n.abrupt("return",JSON.parse(t));case 7:return n.abrupt("return",[]);case 8:case"end":return n.stop()}}),null,this)}},{key:"pushCredentials",value:function(e,t,n){var a,r,i,s;return u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(console.log("pushCredentials",e,t,n),this.configurationService){c.next=3;break}throw Error("Configuration Service not init");case 3:return c.next=5,u.a.awrap(null===(a=this.configurationService.status)||void 0===a?void 0:a.getStatus());case 5:if(c.sent!==g.a.IDLE){c.next=15;break}return console.log("config service idle. let's send stuff"),c.next=10,u.a.awrap(null===(r=this.configurationService.ssid)||void 0===r?void 0:r.setSsid(e));case 10:return c.next=12,u.a.awrap(null===(i=this.configurationService.password)||void 0===i?void 0:i.setPassword(t));case 12:return c.next=14,u.a.awrap(null===(s=this.configurationService.security)||void 0===s?void 0:s.setSecurity(n));case 14:console.log("credentials sent");case 15:return c.abrupt("return");case 16:case"end":return c.stop()}}),null,this)}},{key:"storeCredentials",value:function(){var e,t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("storeCredentials"),this.configurationService){n.next=3;break}throw Error("Configuration Service not init");case 3:return n.next=5,u.a.awrap(null===(e=this.configurationService.status)||void 0===e?void 0:e.getStatus());case 5:if(n.sent!==g.a.IDLE){n.next=11;break}return console.log("config service idle. let's store stuff"),n.next=10,u.a.awrap(null===(t=this.configurationService.status)||void 0===t?void 0:t.setStatus(g.a.SAVE));case 10:console.log("credentials store command sent");case 11:return n.abrupt("return");case 12:case"end":return n.stop()}}),null,this)}},{key:"joinNetwork",value:function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("joinNetwork"),this.configurationService){t.next=3;break}throw Error("Configuration Service not init");case 3:return console.log("config saved already, let's connect to this network"),t.next=6,u.a.awrap(null===(e=this.configurationService.status)||void 0===e?void 0:e.setStatus(g.a.JOIN));case 6:console.log("wifi connect command sent");case 7:case"end":return t.stop()}}),null,this)}}],[{key:"searchDevice",value:function(){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Searching Devices"),t.t0=e,t.next=4,u.a.awrap(navigator.bluetooth.requestDevice({acceptAllDevices:!0,optionalServices:[6157,g.b.uuid,w.b.uuid]}));case 4:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 6:case"end":return t.stop()}}))}}]),e}(),S=n(279),x=n(276),y=n(37),C=n(269),E=function(e){function t(){return Object(l.a)(this,t),Object(v.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.active,n=e.loading,a=e.deviceName,r=e.scanDevice;return t?i.a.createElement("header",{className:"App-header"},i.a.createElement(S.a,{active:n},i.a.createElement(x.a,null,"Connecting to ",null!==a&&void 0!==a?a:"Smart Hub")),i.a.createElement(y.a,{name:"wifi",className:"App-logo",alt:"logo",size:"huge"}),i.a.createElement("p",null,"Pair with a HIFE Hub to get started."),i.a.createElement(C.a,{onClick:r},"Scan")):i.a.createElement("div",null)}}]),t}(i.a.Component),m=n(281),N=function(e){function t(){return Object(l.a)(this,t),Object(v.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.active,n=e.loading,a=e.deviceName,r=e.ssid,s=e.handleBackButton;return t?i.a.createElement(m.a,{inverted:!0,className:"App configured"},i.a.createElement(S.a,{active:n},i.a.createElement(x.a,null,"Connecting ",null!==a&&void 0!==a?a:"Smart Hub"," to ",null!==r&&void 0!==r?r:"Smart Hub")),i.a.createElement(y.a,{name:"arrow circle left",onClick:s,color:"yellow",size:"large"}),i.a.createElement(y.a,{name:"check circle",size:"massive",color:"green"}),i.a.createElement("div",null,"Your Smart Hub has been connected to WiFi successfully")):i.a.createElement("div",null)}}]),t}(i.a.Component),O=n(282),j=n(278),R=function(e){function t(){return Object(l.a)(this,t),Object(v.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.active,n=e.collectPassword,a=e.deviceName,r=e.loading,s=e.handleBackButton,c=e.networkList;return t?i.a.createElement(m.a,{inverted:!0,className:"App scan_list"},i.a.createElement(S.a,{active:r},i.a.createElement(x.a,null,"Connecting to ",null!==a&&void 0!==a?a:"Smart Hub")),i.a.createElement(y.a,{name:"arrow circle left",onClick:s,color:"yellow",size:"large"}),i.a.createElement(O.a,null,null!==a&&void 0!==a?a:"Havells"),i.a.createElement(j.a,{inverted:!0},i.a.createElement(j.a.Body,null,c.map((function(e,t){return i.a.createElement(j.a.Row,{key:t},i.a.createElement(j.a.Cell,{onClick:function(){n(e)}},e))}))))):i.a.createElement("div",null)}}]),t}(i.a.Component),L=n(277),D=function(e){function t(){return Object(l.a)(this,t),Object(v.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.active,n=e.handleBackButton,a=e.ssid,r=e.updatePassword,s=e.configureNetwork,c=e.password;return t?i.a.createElement(m.a,{inverted:!0,className:"App password_input"},i.a.createElement(y.a,{name:"arrow circle left",onClick:n,color:"yellow",size:"large"}),i.a.createElement(y.a,{name:"wifi",size:"huge",color:"blue"}),i.a.createElement(O.a,{size:"medium"},a),i.a.createElement(L.a,{placeholder:"Password",size:"large",onChange:r}),i.a.createElement(C.a,{onClick:function(){s(c)}},"Connect")):i.a.createElement("div",null)}}]),t}(i.a.Component);!function(e){e[e.CONNECT=0]="CONNECT",e[e.SCAN_LIST=1]="SCAN_LIST",e[e.PASSWORD_INPUT=2]="PASSWORD_INPUT",e[e.CONFIGURED=3]="CONFIGURED"}(a||(a={}));var A=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(v.a)(this,Object(d.a)(t).call(this,e))).provisioner=void 0,n.state={deviceName:void 0,networkList:[],ssid:void 0,page:a.CONNECT,connected:!1,password:void 0,provisioner:void 0,loading:!1},n.scanDevice=n.scanDevice.bind(Object(f.a)(n)),n.collectPassword=n.collectPassword.bind(Object(f.a)(n)),n.updatePassword=n.updatePassword.bind(Object(f.a)(n)),n.handleBackButton=n.handleBackButton.bind(Object(f.a)(n)),n.setLoading=n.setLoading.bind(Object(f.a)(n)),n.handleConfigStateChange=n.handleConfigStateChange.bind(Object(f.a)(n)),n.configureNetwork=n.configureNetwork.bind(Object(f.a)(n)),n.handleScanStateChange=n.handleScanStateChange.bind(Object(f.a)(n)),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"handleScanStateChange",value:function(e){var t,n;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log("Scan State:",e),!(t=this.state.provisioner)){a.next=13;break}if(e!==w.a.ERROR){a.next=6;break}return console.error("Wifi scanning failed!!!"),a.abrupt("return");case 6:if(e!==w.a.SCANNED){a.next=13;break}return console.log("scanned"),a.next=10,u.a.awrap(t.readScanList());case 10:n=a.sent,console.log(n),n&&(this.setState({networkList:n}),this.setLoading(!1),this.handleForwardButton());case 13:case"end":return a.stop()}}),null,this)}},{key:"handleConfigStateChange",value:function(e){var t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("Config State:",e),e!==g.a.ERROR){n.next=6;break}return console.error("Wifi Config failed!!!"),n.abrupt("return");case 6:if(e!==g.a.SAVED){n.next=14;break}if(!(t=this.state.provisioner)){n.next=12;break}return console.log("Start join"),n.next=12,u.a.awrap(t.joinWifi());case 12:n.next=15;break;case 14:e===g.a.JOINED&&this.handleForwardButton();case 15:case"end":return n.stop()}}),null,this)}},{key:"scanDevice",value:function(e){var t;return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setLoading(!0),e.t0=b,e.next=5,u.a.awrap(k.searchDevice());case 5:return e.t1=e.sent,t=new e.t0(e.t1),e.next=9,u.a.awrap(t.init(this.handleConfigStateChange,this.handleScanStateChange));case 9:return this.setLoading(!1),this.setState({provisioner:t}),this.setLoading(!0),e.next=14,u.a.awrap(t.getScanList());case 14:e.next=19;break;case 16:e.prev=16,e.t2=e.catch(0),console.error("ERROR",e.t2);case 19:case"end":return e.stop()}}),null,this,[[0,16]])}},{key:"collectPassword",value:function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("collectPassword"),this.setLoading(!0),this.setState({ssid:e}),this.handleForwardButton(),this.setLoading(!1);case 5:case"end":return t.stop()}}),null,this)}},{key:"updatePassword",value:function(e,t){console.log("updatePassword",t.value),this.setState({password:t.value})}},{key:"configureNetwork",value:function(e){var t,n,a;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:console.log("configureNetwork"),this.setLoading(!0),t=this.state,n=t.ssid,a=t.provisioner,n&&e&&(null===a||void 0===a||a.setWifiConfig(n,e)),this.setLoading(!1);case 5:case"end":return r.stop()}}),null,this)}},{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"handleBackButton",value:function(){var e=this.state.page;if(e!==a.CONNECT){var t=e-1;this.setState({page:t})}}},{key:"handleForwardButton",value:function(){var e=this.state.page;if(e!==a.CONFIGURED){var t=e+1;this.setState({page:t})}}},{key:"render",value:function(){var e=this.state,t=e.deviceName,n=e.page,r=e.loading,s=e.networkList,c=e.ssid,o=e.password;return i.a.createElement("div",{className:"App"},i.a.createElement(E,{active:n===a.CONNECT,deviceName:t,loading:r,scanDevice:this.scanDevice}),i.a.createElement(R,{active:n===a.SCAN_LIST,collectPassword:this.collectPassword,deviceName:t,networkList:s,loading:r,handleBackButton:this.handleBackButton}),i.a.createElement(D,{active:n===a.PASSWORD_INPUT,password:o,handleBackButton:this.handleBackButton,ssid:c,updatePassword:this.updatePassword,configureNetwork:this.configureNetwork}),i.a.createElement(N,{active:n===a.CONFIGURED,deviceName:t,loading:r,handleBackButton:this.handleBackButton,ssid:c}))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},36:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var a,r=n(1),i=n.n(r),s=n(10),c=n(11),o=function(){function e(t,n){Object(s.a)(this,e),this.service=null,this.server=void 0,this.status=null,this.list=null,this.statusChangeCallback=void 0,this.server=t,this.statusChangeCallback=n}return Object(c.a)(e,[{key:"init",value:function(){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("init"),t.prev=1,t.next=4,i.a.awrap(this.server.getPrimaryService(e.uuid));case 4:return this.service=t.sent,console.log("WifiScannerService",this.service,"isAvailable"),t.next=8,i.a.awrap(this.initialiseCharacteristics());case 8:console.log("WifiScannerService","characteristics","isAvailable"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.error(t.t0);case 14:return t.abrupt("return");case 15:case"end":return t.stop()}}),null,this,[[1,11]])}},{key:"initialiseCharacteristics",value:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.service){e.next=3;break}return console.error("No Service found"),e.abrupt("return");case 3:return this.status=new u(this.service,this.statusChangeCallback),this.list=new l(this.service),e.next=7,i.a.awrap(this.status.init());case 7:return e.next=9,i.a.awrap(this.list.init());case 9:case"end":return e.stop()}}),null,this)}}]),e}();o.uuid="2b42180d-0000-1000-7700-00805f9b5ab3",function(e){e[e.IDLE=0]="IDLE",e[e.SCAN=1]="SCAN",e[e.SCANNING=2]="SCANNING",e[e.SCANNED=3]="SCANNED",e[e.ERROR=4]="ERROR"}(a||(a={}));var u=function(){function t(e,n){Object(s.a)(this,t),this.service=void 0,this.characteristic=void 0,this.callback=void 0,this.service=e,this.callback=n}return Object(c.a)(t,[{key:"init",value:function(){var e=this;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(this.service.getCharacteristic(t.uuid));case 2:this.characteristic=n.sent,console.log("addEventListener"),this.characteristic.addEventListener("characteristicvaluechanged",(function(t){var n;console.log("event listener");var a=null===(n=t.target.value)||void 0===n?void 0:n.getUint8(0);e.callback&&e.callback(a)})),console.log("startNotifications"),this.characteristic.startNotifications();case 7:case"end":return n.stop()}}),null,this)}},{key:"getStatus",value:function(){var e,t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.characteristic){n.next=3;break}return console.error("No Characteristic found"),n.abrupt("return",a.ERROR);case 3:return n.next=5,i.a.awrap(this.characteristic.readValue());case 5:if(1!==(e=n.sent).buffer.byteLength){n.next=11;break}if(t=e.getUint8(0),console.info("ye state aayi hai",t),!(t<a.ERROR)){n.next=11;break}return n.abrupt("return",t);case 11:return n.abrupt("return",a.ERROR);case 12:case"end":return n.stop()}}),null,this)}},{key:"setStatus",value:function(t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.characteristic){n.next=2;break}throw Error("No Characteristic found");case 2:if(t===a.SCAN){n.next=4;break}return n.abrupt("return");case 4:return console.log("Wring tooooo"),n.prev=5,n.next=8,i.a.awrap(this.characteristic.writeValue(e.from([t])));case 8:return n.abrupt("return",n.sent);case 11:n.prev=11,n.t0=n.catch(5),console.error("Failed to write to gatt server");case 14:case"end":return n.stop()}}),null,this,[[5,11]])}}]),t}();u.uuid="2b42180d-0000-1000-7701-00805f9b5ab3";var l=function(){function e(t){Object(s.a)(this,e),this.service=void 0,this.characteristic=void 0,this.service=t}return Object(c.a)(e,[{key:"init",value:function(){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(this.service.getCharacteristic(e.uuid));case 2:this.characteristic=t.sent;case 3:case"end":return t.stop()}}),null,this)}},{key:"getList1",value:function(){var e,t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.characteristic){n.next=2;break}throw Error("No Characteristic found");case 2:return n.next=4,i.a.awrap(this.characteristic.readValue());case 4:return e=n.sent,t=new TextDecoder("utf-8").decode(e.buffer),console.log("yaha kara read",t),n.abrupt("return",t);case 8:case"end":return n.stop()}}),null,this)}}]),e}();l.uuid="2b42180d-0000-1000-7702-00805f9b5ab3"}).call(this,n(93).Buffer)}},[[138,1,2]]]);
//# sourceMappingURL=main.99541f66.chunk.js.map